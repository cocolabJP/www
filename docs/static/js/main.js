import{createApp}from"vue";import axios from"axios";const $=e=>document.getElementById(e),SLIDE_ITEMS=[{img:"202404_startup",url:"https://note.com/cocolabjp/n/n705cb3d2b866"},{img:"202409_ipsjKansai",url:"https://cocolabjp.tumblr.com/post/763005611667570688"},{img:"202409_100program",url:"https://cocolabjp.tumblr.com/post/762935350489464832"}],app=createApp({delimiters:["${","}"],data(){return{pageType:"page",logoWidth:180,news:[],blog:[],slides:SLIDE_ITEMS,slideIndex:-1}},created:function(){this.pageType=$("app").dataset.type,"top"==this.pageType&&(window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeWindow))},mounted:function(){"top"==this.pageType&&(this.onResizeWindow(),this.onScroll(),this.setupSlideshow(),this.loadTumblrNews())},destroyed:function(){"top"==this.pageType&&window.removeEventListener("scroll",this.onScroll)},methods:{onResizeWindow(){var e=window.innerWidth;this.logoWidth=1280<e?180:e<640?90:180*e/1280},onScroll(){window.scrollY>2*this.logoWidth?$("header").classList.add("fixed"):58<window.scrollY?($("header").classList.add("scaled"),$("header").classList.remove("fixed"),$("header").classList.remove("drawer-opened"),$("logomark").style.width=Math.max(50,this.logoWidth+58-window.scrollY)+"px"):($("header").classList.remove("scaled"),$("logomark").style.width="")},setupSlideshow(){this.slideshowAnim(),setInterval(()=>{this.slideshowAnim()},5e3)},slideshowAnim(){$("progress-bar").classList.remove("anim"),setTimeout(()=>{$("progress-bar").classList.add("anim")},500),this.slideIndex++,this.slideIndex==this.slides.length&&(this.slideIndex=0),$("slider-content").style.top=-100*this.slideIndex+"%"},getSlideImgSrc(e){return"/static/img/top-visual/"+e.img+".png"},openDrawerMenu(){$("header").classList.toggle("drawer-opened")},scrollTo(e){window.scrollTo({top:$(e).offsetTop-85,behavior:"smooth"})},scrollToRef(e){window.scrollTo({top:$(e).offsetTop-100,behavior:"smooth"})},async loadTumblrNews(){axios.get("https://cocolab.yukimat.jp/rss/",{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{200==e.status&&(this.news=e.data.news,this.blog=e.data.blog)}).catch(e=>{console.log("err:",e)})},getPrettyDate(e){return new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}).replaceAll("/",".")}}});app.mount("#app");