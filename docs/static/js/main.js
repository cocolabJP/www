import{createApp}from"vue";import axios from"axios";const $=e=>document.getElementById(e),app=createApp({delimiters:["${","}"],data(){return{pageType:"page",logoWidth:180,news:[]}},created:function(){this.pageType=$("app").dataset.type,"top"==this.pageType&&(window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeWindow))},mounted:function(){"top"==this.pageType&&(this.onResizeWindow(),this.onScroll(),this.loadTumblrNews())},destroyed:function(){"top"==this.pageType&&window.removeEventListener("scroll",this.onScroll)},methods:{onResizeWindow(){var e=window.innerWidth;this.logoWidth=1280<e?180:e<640?90:180*e/1280},onScroll(){window.scrollY>2*this.logoWidth?$("header").classList.add("fixed"):58<window.scrollY?($("header").classList.add("scaled"),$("header").classList.remove("fixed"),$("header").classList.remove("drawer-opened"),$("logomark").style.width=Math.max(50,this.logoWidth+58-window.scrollY)+"px"):($("header").classList.remove("scaled"),$("logomark").style.width="")},openDrawerMenu(){$("header").classList.toggle("drawer-opened")},scrollTo(e){window.scrollTo({top:$(e).offsetTop-85,behavior:"smooth"})},async loadTumblrNews(){axios.get("https://cocolab.yukimat.jp/rss/",{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{200==e.status&&(this.news=e.data.news)}).catch(e=>{console.log("err:",e)})},getPrettyDate(e){return new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}).replaceAll("/",".")}}});app.mount("#app");