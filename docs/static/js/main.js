import{createApp}from"vue";import axios from"axios";const $=o=>document.getElementById(o),SLIDE_ITEMS=[{img:"202602_inno-vation",url:"https://cocolabjp.tumblr.com/post/809692145400381440"},{img:"202511_lab-pv",url:"https://youtu.be/Sd9_H3f3yPA"},{img:"202509_ipsjKansai",url:"https://cocolabjp.tumblr.com/post/796035693426196480"},{img:"202509_ICMU2025",url:"https://cocolabjp.tumblr.com/post/794487082880040960"},{img:"202509_Tornado",url:"https://cocolabjp.tumblr.com/post/794894287377727488"},{img:"202505_ITS101",url:"https://cocolabjp.tumblr.com/post/785216546183200768"},{img:"202411_HAR-Book",url:"https://cocolabjp.tumblr.com/post/766362900529020928"}],app=createApp({delimiters:["${","}"],data(){return{pageType:"page",logoWidth:180,news:[],blog:[],slides:SLIDE_ITEMS,slideIndex:-1}},created:function(){this.pageType=$("app").dataset.type,"top"==this.pageType&&(window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeWindow))},mounted:function(){"top"==this.pageType&&(this.onResizeWindow(),this.onScroll(),this.setupSlideshow(),this.loadTumblrNews())},destroyed:function(){"top"==this.pageType&&window.removeEventListener("scroll",this.onScroll)},methods:{onResizeWindow(){var o=window.innerWidth;this.logoWidth=1280<o?180:o<640?90:180*o/1280},onScroll(){window.scrollY>2*this.logoWidth?$("header").classList.add("fixed"):58<window.scrollY?($("header").classList.add("scaled"),$("header").classList.remove("fixed"),$("header").classList.remove("drawer-opened"),$("logomark").style.width=Math.max(50,this.logoWidth+58-window.scrollY)+"px"):($("header").classList.remove("scaled"),$("logomark").style.width="")},setupSlideshow(){this.slideshowAnim(),setInterval(()=>{this.slideshowAnim()},5e3)},slideshowAnim(){$("progress-bar").classList.remove("anim"),setTimeout(()=>{$("progress-bar").classList.add("anim")},500),this.slideIndex++,this.slideIndex==this.slides.length&&(this.slideIndex=0),$("slider-content").style.top=-100*this.slideIndex+"%"},getSlideImgSrc(o){return"/static/img/top-visual/"+o.img+".png"},openDrawerMenu(){$("header").classList.toggle("drawer-opened")},scrollTo(o,e){window.scrollTo({top:$(o).offsetTop-e,behavior:"smooth"})},scrollToH3(o){this.scrollTo(o,70)},scrollToH4(o){this.scrollTo(o,125)},scrollToH5(o){this.scrollTo(o,180)},scrollToRef(o){this.scrollTo(o,180)},async loadTumblrNews(){axios.get("https://cocolab.yukimat.jp/rss/",{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(o=>{200==o.status&&(this.news=o.data.news,this.blog=o.data.blog)}).catch(o=>{console.log("err:",o)})},getPrettyDate(o){return new Date(o).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}).replaceAll("/",".")}}});app.mount("#app");